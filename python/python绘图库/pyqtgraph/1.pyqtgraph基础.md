# pyqtgraphç±»çš„æ¶æ„

æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š

- QtGUIç”±QWidgetç»„æˆ
- ä¸€ä¸ªåä¸ºQGraphicsViewçš„ç‰¹æ®Šå°éƒ¨ä»¶ç”¨äºæ˜¾ç¤ºå¤æ‚çš„å›¾å½¢
- QGraphicsItemså®šä¹‰QGraphicsè§†å›¾ä¸­æ˜¾ç¤ºçš„å¯¹è±¡ã€‚

[![img](images/plottingClasses1.png)



pyqtgraphç±»çš„æ¶æ„å¯ä»¥å‚è€ƒ[Plotting in pyqtgraph](https://pyqtgraph.readthedocs.io/en/latest/getting_started/plotting.html)

ç®€å•çš„è¯´ï¼Œåœ¨ç»˜å›¾æ—¶ä¸»è¦å…³æ³¨ **GraphicsLayoutWidget** å’Œ **PlotWidget** ï¼Œå®ƒä»¬éƒ½å±äº QWidget çš„å­ç±»ã€‚å¯ä»¥æŠŠå®ƒä»¬å½“æˆPyQté‡Œçš„ä¸€ä¸ªå°éƒ¨ä»¶ï¼Œå¯ä»¥åµŒå…¥åˆ°PyQtå†…ã€‚

ä¸»è¦åŒºåˆ«åœ¨äºï¼š

- **GraphicsLayoutWidget** ç”¨äºç»˜åˆ¶å¤šå­å›¾çš„æƒ…å†µï¼Œå®ƒåŒ…å«å¤šä¸ª **PlotItem**ã€‚
- **PlotWidget** ç”¨äºç»˜åˆ¶å•å›¾çš„æƒ…å†µï¼Œå®ƒåªåŒ…å«ä¸€ä¸ª **PlotItem**ã€‚
- **PlotItem**ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€å¼ å›¾ï¼Œå®ƒåŒ…å«åæ ‡è½´ã€æ ‡é¢˜ã€**ViewBox** ç­‰å†…å®¹ã€‚

### å¤šå­å›¾ç¤ºä¾‹

åŸºæœ¬å‚æ•°

```python
addPlot(item, row=None, col=None, rowspan=1, colspan=1)
```

ç»˜å›¾

```python
import pyqtgraph as pg

w = pg.GraphicsLayoutWidget()
p1 = w.addPlot(row=0, col=0)
p2 = w.addPlot(row=0, col=1)
p3 = w.addPlot(row=1, col=0, colspan=2)
w.show()

if __name__ == "__main__":
    pg.exec()
```

<img src="images/image-20230824143045587.png" alt="image-20230824143045587" style="zoom:67%;" />

ç›®å‰ï¼Œæƒ³è°ƒæ•´å­å›¾æ¨ªå‘çš„ç»˜å›¾æ¯”ä¾‹å¹¶æ²¡æœ‰ä¸€ä¸ªå®˜æ–¹æä¾›çš„åˆé€‚çš„æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ–¹æ¡ˆ

```python
w = pg.GraphicsLayoutWidget()

# æ·»åŠ å‡ ä¸ªç©ºLabelå¡«å……ç©ºé—´
w.addLabel("", 0, 0)
w.addLabel("", 0, 1)
w.addLabel("", 0, 2)
p1 = w.addPlot(row=1, col=0, colspan=2)
p2 = w.addPlot(row=1, col=2)
p3 = w.addPlot(row=2, col=0, colspan=3)
w.show()
```

### å•å›¾ç¤ºä¾‹

```python
import pyqtgraph as pg
app = pg.mkQApp()
w = pg.PlotWidget()
line = w.plot([1, 2, 3], [2, 1, 3], symbol="o")
w.show()

if __name__ == "__main__":
    pg.exec()
```

<img src="images/image-20230824144821611.png" alt="image-20230824144821611" style="zoom:67%;" />

### ç›´æ¥ä½¿ç”¨pg.plot()

è¿™ä¼šç›´æ¥åˆ›å»ºä¸€ä¸ª`PlotWidget`

```python
import pyqtgraph as pg
 
pw = pg.plot([1, 2, 3], [2, 1, 3], symbol="o")
if __name__ == "__main__":
    pg.exec()
```

<img src="images/image-20230824144821611.png" alt="image-20230824144821611" style="zoom:67%;" />



### å°è£…ä¸ºç±»

åŒæ ·ä¹Ÿæ˜¯ä¸ªäººä¹ æƒ¯

å¤šå­å›¾

```python
import pyqtgraph as pg

class MyGraphLayoutWidget(pg.GraphicsLayoutWidget):
    def __init__(self):
        super().__init__()
        p1 = self.addPlot(row=0, col=0)
        p2 = self.addPlot(row=0, col=1)
        p3 = self.addPlot(row=1, col=0, colspan=2)
        self.show()

if __name__ == "__main__":
    app = pg.mkQApp("example")
    win = MyGraphLayoutWidget()
    pg.exec()
```

å•å­å›¾

```python
import pyqtgraph as pg

class MyPlotWidget(pg.PlotWidget):
    def __init__(self):
        super().__init__()
        curve = self.plot([1, 2, 3], [2, 1, 3], symbol="o")
        self.show()

if __name__ == "__main__":
    app = pg.mkQApp("example")
    pw = MyPlotWidget()
    pg.exec()
```



### å˜é‡åçš„çº¦å®š

è¿™æ˜¯æˆ‘çš„ä¸ªäººæ€»ç»“

```python
win = pg.GraphicsLayoutWidget()  # GraphicsLayoutWidget
p1 = win.addPlot()  # PlotItem
curve = p1.plot()  # PlotDataItem

pw = pg.PlotWidget()  # PlotWidget
curve = pw.plot()  # PlotDataItem

vb = p.getViewBox()  # ViewBox

lr = pg.LinearRegionItem()  # LinearRegionItem
line = pg.InfiniteLine(angle=90, movable=True)  # InfiniteLine
```





### ç»˜å›¾çš„åŸºæœ¬æ–¹æ³•

| æ–¹æ³•                                                         | è¯´æ˜                           | è¿”å›                                                         |
| ------------------------------------------------------------ | ------------------------------ | ------------------------------------------------------------ |
| [`pyqtgraph.plot()`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/functions.html#pyqtgraph.plot) | åˆ›å»ºä¸€ä¸ªæ˜¾ç¤ºæ•°æ®çš„æ–°ç»˜å›¾çª—å£   | [`PlotWidget`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/widgets/plotwidget.html#pyqtgraph.PlotWidget) |
| [`PlotItem.plot()`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/graphicsItems/plotitem.html#pyqtgraph.PlotItem.plot) | å°†ä¸€ç»„æ–°æ•°æ®æ·»åŠ åˆ°ç°æœ‰ç»˜å›¾ç»„ä»¶ | PlotDataItem                                                 |
| PlotWidget.plot()                                            | è°ƒç”¨ `PlotItem.plot`           | PlotDataItem                                                 |
| [`GraphicsLayout.addPlot()`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/graphicsItems/graphicslayout.html#pyqtgraph.GraphicsLayout.addPlot) | å°†æ–°ç»˜å›¾æ·»åŠ åˆ°ç»˜å›¾ç½‘æ ¼         | PlotItem                                                     |

ä»¥ä¸Šæ–¹æ³•å‚æ•°ç›¸åŒï¼Œç”¨äºè°ƒæ•´ç»˜å›¾æ˜¾ç¤ºæ•ˆæœã€‚

- **x**: å¯é€‰çš„Xè½´æ•°æ®ã€‚å¦‚æœæœªæŒ‡å®šï¼Œå°†è‡ªåŠ¨ç”Ÿæˆä¸€ç³»åˆ—æ•´æ•°ã€‚
- **y**: Yè½´æ•°æ®ã€‚
- **pen**: ç”¨äºç»˜åˆ¶ç»˜å›¾çº¿çš„ç”»ç¬”ï¼Œæˆ–Noneä»¥ç¦ç”¨çº¿æ¡ã€‚
- **symbol**: ç”¨äºæ¯ä¸ªç‚¹çš„ç¬¦å·å½¢çŠ¶çš„å­—ç¬¦ä¸²ã€‚
- **symbolPen**: ç”¨äºç»˜åˆ¶ç¬¦å·è½®å»“çš„ç”»ç¬”ã€‚
- **symbolBrush**: ç”¨äºå¡«å……ç¬¦å·çš„ç”»åˆ·ã€‚
- **fillLevel**: å¡«å……ç»˜å›¾æ›²çº¿ä¸‹æ–¹åˆ°è¿™ä¸ªYå€¼çš„åŒºåŸŸã€‚
- **brush**: ç”¨äºå¡«å……æ›²çº¿ä¸‹æ–¹çš„ç”»åˆ·ã€‚



PyQtGraphä¸»è¦åŸºäºQtçš„GraphicsViewæ¡†æ¶ã€‚



**QGraphicsItem çš„å­ç±»**ï¼ˆåŒ…å«å…¶ä»– QGraphicsItem å¯¹è±¡ï¼Œå¿…é¡»ä» GraphicsView ä¸­æŸ¥çœ‹ï¼‰

- [`PlotItem`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/graphicsItems/plotitem.html#pyqtgraph.PlotItem) åŒ…å«ä¸€ä¸ªç”¨äºæ˜¾ç¤ºæ•°æ®çš„ViewBoxä»¥åŠç”¨äºæ˜¾ç¤ºè½´å’Œæ ‡é¢˜çš„ AxisItemså’Œæ ‡ç­¾ã€‚è¿™æ˜¯ä¸€ä¸ªQGraphicsItemå­ç±»ï¼Œå› æ­¤åªèƒ½åœ¨GraphicsViewä¸­ä½¿ç”¨ã€‚
- [`GraphicsLayout`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/graphicsItems/graphicslayout.html#pyqtgraph.GraphicsLayout) QGraphicsItem å­ç±»ï¼Œæ˜¾ç¤ºé¡¹ç›®ç½‘æ ¼ã€‚ç”¨äºåŒæ—¶æ˜¾ç¤ºå¤šä¸ªPlotItems ã€‚
- [`ViewBox`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/graphicsItems/viewbox.html#pyqtgraph.ViewBox) ï¼šç”¨äºæ˜¾ç¤ºæ•°æ®çš„ QGraphicsItem å­ç±»ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨é¼ æ ‡ç¼©æ”¾/å¹³ç§» ViewBox çš„å†…å®¹ã€‚é€šå¸¸ï¼Œæ‰€æœ‰ PlotData/PlotCurve/ScatterPlotItems éƒ½ä» ViewBox ä¸­æ˜¾ç¤ºã€‚
- [`AxisItem`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/graphicsItems/axisitem.html#pyqtgraph.AxisItem)ï¼šæ˜¾ç¤ºè½´å€¼ã€åˆ»åº¦å’Œæ ‡ç­¾ã€‚æœ€å¸¸ä¸ PlotItem ä¸€èµ·ä½¿ç”¨ã€‚

**QWidgetçš„å­ç±»**ï¼ˆå¯ä»¥åµŒå…¥åœ¨PyQt GUIä¸­ï¼‰

- [`PlotWidget`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/widgets/plotwidget.html#pyqtgraph.PlotWidget) ï¼šGraphicsView çš„å­ç±»ï¼Œæ˜¾ç¤ºå•ä¸ªPlotItemã€‚PlotItem æä¾›çš„å¤§å¤šæ•°æ–¹æ³• PlotWidget éƒ½å¯ä»¥ç”¨ã€‚
- [`GraphicsLayoutWidget`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/widgets/graphicslayoutwidget.html#pyqtgraph.GraphicsLayoutWidget) ï¼šQWidgetå­ç±»æ˜¾ç¤ºå•ä¸ª[`GraphicsLayout`](https://pyqtgraph.readthedocs.io/en/latest/api_reference/graphicsItems/graphicslayout.html#pyqtgraph.GraphicsLayout)ã€‚ `GraphicsLayout` æä¾›çš„å¤§å¤šæ•°æ–¹æ³•GraphicsLayoutWidgetä¹Ÿå¯ä»¥ç”¨ã€‚

å…·ä½“ç±»ä¹‹é—´çš„å…³ç³»å¯ä»¥å‚è€ƒï¼š[UML class diagram â€” pyqtgraph 0.13.4.dev0 documentation](https://pyqtgraph.readthedocs.io/en/latest/api_reference/uml_overview.html#uml-diagram)

`PlotWidget`ä¸`PlotItem`çš„è”ç³»

**åŒ…å«å…³ç³»**: ä¸€ä¸ª`PlotWidget`å®é™…ä¸ŠåŒ…å«ä¸€ä¸ª`PlotItem`ã€‚è¿™æ„å‘³ç€æ¯ä¸ª`PlotWidget`éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„`PlotItem`ã€‚

**æ–¹æ³•ä¼ é€’**: `PlotWidget`çš„å¤§å¤šæ•°æ–¹æ³•å®é™…ä¸Šæ˜¯ç›´æ¥ä¼ é€’ç»™å…¶å†…éƒ¨çš„`PlotItem`çš„ã€‚

**ç¤ºä¾‹**

å¦‚æœåªéœ€è¦ä¸€ä¸ªç®€å•çš„ç»˜å›¾ï¼š

```python
import pyqtgraph as pg

w = pg.PlotWidget()
w.plot([1, 2, 3], [1, 2, 3])
```

å¦‚æœéœ€è¦æ›´å¤æ‚çš„å¸ƒå±€ï¼š

```python
import pyqtgraph as pg

layout = pg.GraphicsLayout()
plot1 = layout.addPlot()
plot1.plot([1, 2, 3], [1, 2, 3])
```

### ViewBox

> åœ¨ pyqtgraph ä¸­ï¼Œ`ViewBox` æ˜¯ä¸€ä¸ªéå¸¸å…³é”®çš„ç»„ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ `QGraphicsItem` å­ç±»ï¼Œç”¨äºæ˜¾ç¤ºå’Œç®¡ç†ç»˜å›¾åŒºåŸŸå†…çš„æ•°æ®ã€‚ç®€è€Œè¨€ä¹‹ï¼Œ`ViewBox` æ˜¯å®é™…ç»˜å›¾å†…å®¹ï¼ˆå¦‚æ›²çº¿ã€æ•£ç‚¹ç­‰ï¼‰çš„å®¹å™¨ã€‚

è·å–ViewBoxçš„æ–¹å¼

```python
viewBox = plot_item.getViewBox()
```



### pg.plotä¸ pg.PlotWidgetçš„åŒºåˆ«

åœ¨ pyqtgraph ä¸­ï¼Œ`pg.plot()` å’Œ `pg.PlotWidget()` éƒ½ç”¨äºåˆ›å»ºç»˜å›¾ï¼Œä½†å®ƒä»¬çš„ç”¨é€”å’Œä¸Šä¸‹æ–‡ç•¥æœ‰ä¸åŒã€‚

**pg.plot()**

1. **ç®€ä¾¿æ€§**: `pg.plot()` æ˜¯ä¸€ä¸ªå¿«æ·å‡½æ•°ï¼Œç”¨äºå¿«é€Ÿåˆ›å»ºä¸€ä¸ªæ–°çš„ç»˜å›¾çª—å£ï¼Œå¹¶ç«‹å³æ˜¾ç¤ºæ•°æ®ã€‚
2. **è¿”å›å€¼**: å®ƒè¿”å›ä¸€ä¸ª `PlotWidget` å¯¹è±¡ã€‚
3. **ç”¨é€”**: é€šå¸¸ç”¨äºå¿«é€Ÿå¯è§†åŒ–æ•°æ®ï¼Œè€Œä¸éœ€è¦è¿›ä¸€æ­¥è‡ªå®šä¹‰æˆ–åµŒå…¥åˆ°æ›´å¤æ‚çš„åº”ç”¨ç¨‹åºä¸­ã€‚

```python
w = pg.plot([1, 2, 3], [1, 2, 3])
```

**pg.PlotWidget()**

1. **çµæ´»æ€§**: `pg.PlotWidget()` åˆ›å»ºä¸€ä¸ªæ–°çš„ `PlotWidget` å¯¹è±¡ï¼Œä½†ä¸ä¼šç«‹å³æ˜¾ç¤ºå®ƒã€‚è¿™ä½¿ä½ å¯ä»¥æ›´çµæ´»åœ°è‡ªå®šä¹‰ç»˜å›¾æˆ–å°†å…¶åµŒå…¥åˆ°æ›´å¤æ‚çš„ Qt åº”ç”¨ç¨‹åºä¸­ã€‚
2. **è¿”å›å€¼**: å®ƒä¹Ÿè¿”å›ä¸€ä¸ª `PlotWidget` å¯¹è±¡ã€‚
3. **ç”¨é€”**: é€šå¸¸ç”¨äºæ›´å¤æ‚çš„åº”ç”¨ç¨‹åºï¼Œå…¶ä¸­ä½ å¯èƒ½éœ€è¦æ›´å¤šçš„æ§åˆ¶æƒæˆ–éœ€è¦å°†ç»˜å›¾åµŒå…¥åˆ°å…¶ä»– Qt ç»„ä»¶ä¸­ã€‚

```python
w = pg.PlotWidget()
w.plot([1, 2, 3], [1, 2, 3])
```

**åŒºåˆ«**

1. **è‡ªåŠ¨æ˜¾ç¤º**: `pg.plot()` ä¼šç«‹å³åˆ›å»ºå¹¶æ˜¾ç¤ºä¸€ä¸ªæ–°çš„ç»˜å›¾çª—å£ï¼Œè€Œ `pg.PlotWidget()` åªæ˜¯åˆ›å»ºä¸€ä¸ª `PlotWidget` å¯¹è±¡ã€‚
2. **ç”¨é€”**: `pg.plot()` æ›´é€‚ç”¨äºå¿«é€Ÿå¯è§†åŒ–ï¼Œè€Œ `pg.PlotWidget()` æ›´é€‚ç”¨äºéœ€è¦æ›´å¤šè‡ªå®šä¹‰æˆ–åµŒå…¥åˆ°å¤æ‚åº”ç”¨ç¨‹åºä¸­çš„åœºæ™¯ã€‚

**ç»“è®º**

ä»åŠŸèƒ½ä¸Šçœ‹ï¼Œä¸¤è€…éƒ½è¿”å›ä¸€ä¸ª `PlotWidget` å¯¹è±¡ï¼Œå¹¶å…è®¸ä½ è¿›è¡Œç»˜å›¾ã€‚ä¸»è¦çš„åŒºåˆ«åœ¨äºå®ƒä»¬çš„ç”¨é€”å’Œä¸Šä¸‹æ–‡ï¼š`pg.plot()` æ˜¯ç”¨äºå¿«é€Ÿå¯è§†åŒ–çš„ï¼Œè€Œ `pg.PlotWidget()` æä¾›äº†æ›´å¤šçš„çµæ´»æ€§ã€‚



> ğŸ’¡ GraphicsLayoutä¸GraphicsLayoutWidgetçš„åŒºåˆ«
>
> - `GraphicsLayoutWidget` åŒ…å«äº† `GraphicsLayout``
> - ``GraphicsLayoutWidget` æ˜¯ä¸€ä¸ª `QWidget`ã€‚
> - `GraphicsLayoutWidget` æ›´é€‚ç”¨äºå¸¸è§„çš„ Qt åº”ç”¨ç¨‹åºã€‚

